@using DTOs.Implementation.ShoppingCarts.Incomings
@using DataAccess.Entities
@using Presentation.Commons.Constants
@{
    var cartItems = ViewData[nameof(ShoppingCart)] as IEnumerable<CartItemDto>;
    var total = ViewData["Total"];
    var isValidToDisplay = !Equals(cartItems, null) && cartItems.Count() > 0;
}
<section id="view-shopping-cart" name="wrapper" style="display: none;"
         class="position-fixed row m-0 p-0 top-0 bottom-0 start-0 end-0 bg-dark bg-opacity-50 justify-content-end">
    <section class="col-md-8" onclick="HideShoppingCart();"></section>
    <section name="shopping-cart-header" class="col-sm-12 col-md-4 p-0 h-100 bg-light position-relative">
        <header class="bg-success px-2 py-3 d-flex justify-content-between position-absolute top-0 start-0 end-0">
            <span class="my-auto h3">Shopping Cart</span>
            <button onclick="HideShoppingCart();" class="btn btn-outline-light border-3 rounded-circle">
                <i class="fa-solid fa-x"></i>
            </button>
        </header>
        <main class="h-100" style="padding-top: 4.5rem">
            <div name="shopping-cart-items" class="d-flex flex-column h-100">
                <ul id="item-list" class="p-0 m-0 bg-white overflow-auto hide-scrollbar flex-grow-1">
                    @if (isValidToDisplay)
                    {
                        @foreach (var item in cartItems)
                        {
                            <li name="cart-item" id="@item.ProductId" onclick="RemoveItemFromCart(event);" class="p-2 d-flex shadow-sm">
                                <div class="col-auto d-none d-lg-block">
                                    <img style="width: 100px; height: 100px" class="rounded"
                                    src="@item.ImageUrl" />
                                </div>
                                <div class="ms-2 d-flex flex-grow-1">
                                    <div class="my-auto">
                                        <strong class="d-inline-block mb-2 text-primary product-name">
                                            @item.ProductName
                                        </strong>
                                        <p class="card-text mb-auto">
                                            <span class="cart-item-quantity">
                                                @item.Quantity
                                            </span>
                                            x
                                            <span class="cart-item-unit-price">
                                                @item.UnitPrice
                                            </span>
                                        </p>
                                    </div>
                                </div>
                                <div class="d-flex align-items-center">
                                    <button id="remove-item-button" class="btn btn-light border-3 rounded-circle">
                                        <i id="remove-item-button" class="fa-solid fa-x"></i>
                                    </button>
                                </div>
                            </li>
                        }
                    }
                </ul>
                <footer name="footer" class="px-2 bg-dark text-light">
                    <div class="py-2 d-flex justify-content-between border-2 border-bottom fw-bold">
                        <span>Total: </span>
                        <span class="text-success">
                            <b id="cart-total">@total</b>
                            <b>VND</b>
                        </span>
                    </div>
                    <div class="d-flex flex-column py-3">
                        <button class="btn btn-light mb-2 fw-bold bg-success" onclick="MoveShoppingCart()">
                            VIEW CART
                        </button>
                        <button class="btn btn-light fw-bold bg-success" onclick="MoveCheckOut()">CHECKOUT</button>
                    </div>
                </footer>
            </div>
        </main>
    </section>
</section>