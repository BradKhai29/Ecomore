@page "{productId:guid?}"
@using DataAccess.DataSeedings
@model Presentation.Areas.Admin.Pages.Product.EditModel
@{
    var product = Model.Product;
    int imageOrder = 0;
}

@if (Model.IsProductExisted && Model.IsInUpdateMode)
{
    <section class="container mt-5">
        <form id="@product.Id" class="row mx-0" method="post">
            <div class="col-sm-12 col-md-5 p-0 d-flex flex-column border border-end">
                <div class="flex-grow-1 d-flex">
                    @* @foreach (var imageUrl in product.ImageUrls)
                    {
                        <img class="w-100" src="@imageUrl"
                             name="@(imageOrder == 0 ? "product-image" : "normal-iamge")"
                             style="display: @(imageOrder == 0 ? "inline" : "none")" />
                        {
                            imageOrder = imageOrder + 1;
                        }
                    } *@
                </div>
                <section class="p-3 position-relative">
                    <div class="d-flex overflow-scroll hide-scrollbar justify-content-center">
                        <button class="position-absolute rounded-circle btn btn-dark top-50 end-0 me-1 translate-middle-y">
                            <i class="fa-solid fa-arrow-right"></i>
                        </button>
                        <button class="position-absolute rounded-circle btn btn-dark top-50 start-0 ms-1 translate-middle-y">
                            <i class="fa-solid fa-arrow-left"></i>
                        </button>
                        @for (int i = 0; i < 4; i++)
                        {
                            <div class="mx-1">
                                <img style="width: 100px; height: 100px" class="rounded"
                                     src="https://www.svgrepo.com/show/508699/landscape-placeholder.svg" />
                            </div>
                        }
                    </div>
                </section>
            </div>
            <div class="col-sm-12 col-md-7 p-4 d-flex flex-column border border-end border-bottom">
                <section class="d-flex flex-column flex-grow-1">
                    <p class="d-flex flex-column">
                        <input asp-for="@Model.Product.Id" value="@product.Id" hidden/>
                        <span class="text-danger fw-bold" asp-validation-for="@Model.Product.Name"></span>
                        <div class="input-group mb-3">
                            <span class="input-group-text">Product Name</span>
                            <input type="text" class="form-control rounded-end" asp-for="@Model.Product.Name" value="@product.Name" placeholder="Enter product name">
                        </div>

                        <span class="text-danger fw-bold" asp-validation-for="@Model.Product.CategoryId"></span>
                        <div class="input-group mb-3">
                            <label class="input-group-text" asp-for="@Model.Product.CategoryId">Category</label>
                            <select class="form-select rounded-end" asp-for="@Model.Product.CategoryId">
                                @foreach(var item in Model.Categories)
                                {
                                    <option value="@item.Id">@item.Name</option>
                                }
                            </select>
                        </div>

                        <span class="text-danger fw-bold" asp-validation-for="@Model.Product.UnitPrice"></span>
                        <div class="input-group mb-3">
                            <span class="input-group-text">Unit Price</span>
                            <input type="number" min="1000" max="@int.MaxValue" class="form-control" asp-for="@Model.Product.UnitPrice" value="@product.UnitPrice" placeholder="Enter product unit price">
                            <span class="input-group-text rounded-end">VND</span>
                        </div>
                    </p>
                    <section id="product-description" class="d-flex flex-column flex-grow-1">
                        <span class="text-danger fw-bold" asp-validation-for="@Model.Product.Description"></span>
                        <div class="mb-3">
                            <label asp-for="@Model.Product.Description" class="form-label">Product Description</label>
                            <textarea class="form-control" asp-for="@Model.Product.Description" placeholder="Enter product description" rows="3">@product.Description</textarea>
                        </div>
                        <span class="text-danger fw-bold" asp-validation-for="@Model.Product.QuantityInStock"></span>
                        <div class="d-flex">
                            <div class="input-group mb-3">
                                <span class="input-group-text">Quantity in stock</span>
                                <input type="number" min="1" max="@int.MaxValue" class="form-control rounded-end" asp-for="@Model.Product.QuantityInStock" value="@product.QuantityInStock">
                            </div>
                        </div>
                    </section>
                    <div class="input-group mb-3">
                        <label class="input-group-text" asp-for="@Model.Product.ProductStatusId">Product Status</label>
                        <select class="form-select" asp-for="@Model.Product.ProductStatusId">
                            @{
                                var productStatuses = ProductStatuses.GetValues();
                            }
                            @foreach(var item in productStatuses)
                            {
                                @if (product.ProductStatusId == item.Id)
                                {
                                    <option value="@item.Id" selected>@item.Name</option>
                                }
                                else
                                {
                                    <option value="@item.Id">@item.Name</option>
                                }
                            }
                        </select>
                    </div>
                    <div class="d-flex pt-4 pb-2 flex-column">
                        <button class="btn btn-dark flex-grow-1 rounded-0 fw-bold" type="submit">
                            UPDATE
                        </button>
                        <button class="mt-3 btn btn-danger flex-grow-1 rounded-0 fw-bold">
                            DISABLE THIS PRODUCT
                        </button>
                    </div>
                </section>
            </div>
        </form>
    </section>
}
else
{
    @await Component.InvokeAsync(nameof(Presentation.Pages.Shared.Components.ProductDetail))
}